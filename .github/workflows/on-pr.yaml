name: on pr

on:
  pull_request:
    types: [opened]
    branches:
      - "develop"

  issue_comment:
    types: [created]

jobs:
  check_comment:
    runs-on: ubuntu-latest
    outputs:
      is_triggered: ${{ steps.check.outputs.triggered }}
    steps:
      - name: PR Comment trigger
        uses: Khan/pull-request-comment-trigger@1.0.0
        id: check
        with:
          trigger: "#runtests"
  test:
    runs-on: ubuntu-latest
    needs: check_comment
    if: ${{ needs.check_comment.outputs.is_triggered }} == 'true'
    steps:
      - name: Step 1
        run: echo "step 1"
      - name: Step 2
        run: echo "step 2"
      - name: Step 3
        run: echo "step 3"
